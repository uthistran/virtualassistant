<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<link rel="icon" href="images/DesireCode.png">
	<title>CreateJS export from DesireeFinal</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="../Common/createjs.min.js"></script>
	<script src="DesireeFinal.js"></script>
	<style type="text/css">
		.preloaderStyle {
			position: fixed;
			width: 500px;
			height: 200px;
			top: 50%;
			left: 50%;
			margin-top: -100px;
			/* Negative half of height. */
			margin-left: -250px;
			/* Negative half of width. */
		}

		.headerStyle {
			position: absolute;
			top: 0px;
			left: 0px;
			/* width: 993px; */
			z-index: 11;
			/* visibility: visible; */
			/* margin: auto; */
		}

		.showObj {
			transition: opacity 1s linear;
			opacity: 1;
		}

		.hideObj {
			transition: height 1s linear;
			opacity: 0;
			height: 0px;
		}
	</style>
	<script>

		var canvas, stage, exportRoot;

		function init() {
			setTimeout(function () {
				$('#canvas').removeClass('hideObj').addClass('showObj');
				$('#header').removeClass('hideObj').addClass('showObj');
				$('#footer').removeClass('hideObj').addClass('showObj');
				$('#preloader').removeClass('showObj').addClass('hideObj');
			}, 500)
			fetch("../Common/header.php")
				.then(response => {
					return response.text()
				})
				.then(data => {
					document.querySelector("header").innerHTML = data;
				});

			fetch("../Common/footer.php")
				.then(response => {
					return response.text()
				})
				.then(data => {
					document.querySelector("footer").innerHTML = data;
				});

			canvas = document.getElementById("canvas");
			images = images || {};

			var manifest = [
				{ src: "images/Bkgrnd_Small.png", id: "Bkgrnd_Small" },
				{ src: "images/DesireCode.png", id: "DesireCode" },
				{ src: "images/DesireeBlink101.jpg", id: "DesireeBlink101" },
				{ src: "images/DesireeBlink101pngcopy.jpg", id: "DesireeBlink101pngcopy" },
				{ src: "images/DesireeBlink202.jpg", id: "DesireeBlink202" },
				{ src: "images/DesireeBlink202pngcopy.jpg", id: "DesireeBlink202pngcopy" },
				{ src: "images/DesireeBlink303.jpg", id: "DesireeBlink303" },
				{ src: "images/DesireeBlink303pngcopy.jpg", id: "DesireeBlink303pngcopy" },
				{ src: "images/DesireeGlow.png", id: "DesireeGlow" },
				{ src: "images/DesireeHair1.png", id: "DesireeHair1" },
				{ src: "images/DesireeHiRez101a.png", id: "DesireeHiRez101a" },
				{ src: "images/DesireeTemp101.jpg", id: "DesireeTemp101" },
				{ src: "images/DesireeWings.png", id: "DesireeWings" },
				{ src: "images/HairMove.png", id: "HairMove" },
				{ src: "images/HiDesiree.png", id: "HiDesiree" },
				{ src: "images/Icanmake.png", id: "Icanmake" },
				{ src: "images/LogoIcon101.png", id: "LogoIcon101" },
				{ src: "images/LowerBar101.png", id: "LowerBar101" },
				{ src: "images/MenuHeader101.png", id: "MenuHeader101" },
				{ src: "images/PixieDust.png", id: "PixieDust" },
				{ src: "images/PixieSwirl.png", id: "PixieSwirl" },
				{ src: "images/PixieSwirlBody.png", id: "PixieSwirlBody" },
				{ src: "images/StageNew2.png", id: "StageNew2" },
				{ src: "images/ThePower.png", id: "ThePower" },
				{ src: "images/TwinkleStar111.png", id: "TwinkleStar111" }
			];

			var loader = new createjs.LoadQueue(false);
			loader.addEventListener("fileload", handleFileLoad);
			loader.addEventListener("complete", handleComplete);
			loader.loadManifest(manifest);
		}

		function handleFileLoad(evt) {
			if (evt.item.type == "image") { images[evt.item.id] = evt.result; }
		}

		function handleComplete() {
			exportRoot = new lib.DesireeFinal();

			stage = new createjs.Stage(canvas);
			stage.addChild(exportRoot);
			stage.update();

			createjs.Ticker.framerate = 30;
			createjs.Ticker.addEventListener("tick", stage);
		}
	</script>
</head>

<div id="preloader" class="preloaderStyle showObj">
	<img src="../Common/NewLogoFlashPreloader.png">
</div>

<body onload="init();" style="background-color:#000000;">
	<header id='header' class="headerStyle hideObj"></header>
	<canvas id="canvas" width="980" height="980" class="hideObj" style="background-color:#000000;"></canvas>
	<footer id='footer' class="hideObj"></footer>
</body>


</html>